<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head>
        <title>Provides plugin-interface to Address Lookups via a Semaphore ZP4 HTTPSERV 0.1.2</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8" />
        <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8" />
    <script type="text/javascript">
function addJsClass(el) {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
    </head>

    <body class="body" onload="addJsClass();">
        <div id="navigation">
            <ul>
                <li>
                    <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                        <a href="../guide/index.html" class="button">Table of contents</a>
                        <div id="nav-summary-childs" style="display:none;">
                            
                            <div class="toc-item" style="margin-left:0"><a href="#introduction"><strong>1</strong><span>Introduction</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#theZP4HTTPServer"><strong>2</strong><span>The ZP4 HTTP Server</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#installation"><strong>3</strong><span>Installation</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#configuration"><strong>4</strong><span>Configuration</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#example"><strong>5</strong><span>Example</span></a></div>
                            
                        </div>
                    </div>
                </li>
                <li class="separator selected">
                    <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
                </li>
            </ul>
        </div>
        <div id="header">
            <div class="images clearfix">
                
                
            </div>
            <p>Provides address lookup service and tags so you can easily 
	add address lookups to your web app if you have a ZP4 HTTPSERV service from Semaphore corp running on your network.</p>
        </div>


        <table id="colset" border="0" cellpadding="0" cellspacing="0">
            <tr>
                <td id="col1">
                    <div id="main" class="corner-all">

                        <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                        <div class="project">
                            <h1>Provides plugin-interface to Address Lookups via a Semaphore ZP4 HTTPSERV - Reference Documentation</h1>
                            <p><strong>Authors:</strong> Aaron J. Zirbes</p>
                            <p><strong>Version:</strong> 0.1.2</p>
                            
                        </div>

                        
                        <div id="table-of-content">
                            <h2>Table of Contents</h2>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#introduction"><strong>1</strong><span>Introduction</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#theZP4HTTPServer"><strong>2</strong><span>The ZP4 HTTP Server</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#installation"><strong>3</strong><span>Installation</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#configuration"><strong>4</strong><span>Configuration</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#example"><strong>5</strong><span>Example</span></a></div>
                            
                            <div style="clear:both" ></div>
                        </div>
                        
                        

<h1 id="introduction">1 Introduction</h1>
<h1>Introduction</h1><p class="paragraph"/>The Address Lookup ZP4 plugin adds address lookup support to clean and verify US address within a grails application by using simple GSP tags.  It depends on the jQuery plugin for the tags as it uses jQuery Javascript.<p class="paragraph"/>This plugin also requires that you have a ZP4 HTTPSERV server running on your local intranet that your grails application can see.  This guide will cover setting up the ZP4 HTTPSERV that is included on the ZP4 DVD-ROM that you get from Semaphore corporation.<p class="paragraph"/>


<h1 id="theZP4HTTPServer">2 The ZP4 HTTP Server</h1>
<h1>Setting up the ZP4 HTTP Server</h1><p class="paragraph"/>This section will guide you through setting up the ZP4 HTTPSERV process to serve up the ZP4 web service.<p class="paragraph"/><h2>Install ZP4</h2><p class="paragraph"/>This guide does not cover installation of the ZP4 software, please refer to Semaphore's web site if you need help installing ZP4 from the DVD-ROM.<p class="paragraph"/><h2>The INI file</h2><p class="paragraph"/>The following is a sample INI file named <code>C:&#72;TTPSERV&#72;TTPSERV.ini</code> . You'll need to modify the  <em class="italic">clients</em>  section to make sure your Grails development and production servers can see this address.  You may also want to register the ZP4 server in DNS so you can just call it something like <code>zp4.intranet.example.com</code> .<p class="paragraph"/><div class="code"><pre>&#91;clients&#93;
1=192.168.1.&#42;
2=127.0.0.1<p class="paragraph"/>&#91;options&#93;
port=80
format=XML<p class="paragraph"/>&#91;outputs&#93;
1=Certified
2=Address (<span class="java&#45;keyword">final</span>)
3=Address line 2 (<span class="java&#45;keyword">final</span>)
4=Address leftovers
5=Barcode digits
6=City (<span class="java&#45;keyword">final</span>)
7=City (preferred)
8=Urbanization (<span class="java&#45;keyword">final</span>)
9=State (<span class="java&#45;keyword">final</span>)
10=ZIP (<span class="java&#45;keyword">final</span>)
11=Errors (binary)
12=Error numbers (detailed)
13=Error message</pre></div><p class="paragraph"/><h2>The Start-up Command</h2><p class="paragraph"/>The following command will start up your HTTPSERV, you can create a shortcut with this command in it and put it in the Startup folder in the Start Menu if you wish.  It needs to be run from the <code>C:&#90;P4</code> folder.<p class="paragraph"/><div class="code"><pre>C:&#90;P4&#72;TTPSERV.EXE C:&#72;TTPSERV&#72;TTPSERV.INI</pre></div><p class="paragraph"/><h2>Done!</h2><p class="paragraph"/>You should now be able to fire up the ZP HTTP Server.  You can test it by opening a web browser to the IP address or DNS name of the server.  If it works, you should see a simple submit form.<p class="paragraph"/>


<h1 id="installation">3 Installation</h1>
<h1>Installation</h1><p class="paragraph"/><h2>Service and Groovy classes</h2><p class="paragraph"/>The <code>com.semaphorecorp.zp4.AddressService</code> service, and <code>com.semaphorecorp.zp4.StreetAddress</code> and <code>com.semaphorecorp.zp4.Zp4Address</code> classes should work after setting up the <code>Config.groovy</code> file.<p class="paragraph"/><h2>Tags</h2>
<blockquote class="note">
In order to use the tags, you need need to install the  <em class="italic">jquery</em>  plugin. Then you will need to include the following in the &#60;head&#62; section of your GSP pages.  This can optionally be put in your <code>views/layouts/main.gsp</code> (or whatever layout you are using).
</blockquote><p class="paragraph"/>The required items are the following two lines<p class="paragraph"/><div class="code"><pre>&#60;g:javascript library=<span class="java&#45;quote">"jquery"</span>/&#62;
&#60;script type=<span class="java&#45;quote">"text/javascript"</span> src=<span class="java&#45;quote">"$&#123;resource(file:'address&#45;lookup&#45;zp4.js', dir:'js', plugin:'address&#45;lookup&#45;zpfour')&#125;"</span> /&#62;</pre></div><p class="paragraph"/><h2>Example</h2><p class="paragraph"/><div class="code"><pre>&#60;g:setProvider library=<span class="java&#45;quote">"jquery"</span>/&#62;
&#60;html&#62;
	&#60;head&#62;
		&#60;title&#62;Some Page&#60;/title&#62;
		&#60;g:javascript library=<span class="java&#45;quote">"jquery"</span>/&#62;
		&#60;script type=<span class="java&#45;quote">"text/javascript"</span> src=<span class="java&#45;quote">"$&#123;resource(file:'address&#45;lookup&#45;zp4.js', dir:'js', plugin:'address&#45;lookup&#45;zpfour')&#125;"</span> /&#62;
	&#60;/head&#62;
	&#60;body&#62;
		&#60;form&#62;
		&#8230;
		&#60;g:textField name=<span class="java&#45;quote">"address"</span>&#62;&#60;br/&#62;
		&#60;g:textField name=<span class="java&#45;quote">"city"</span>&#62;		
		&#60;g:textField name=<span class="java&#45;quote">"state"</span>&#62;		
		&#60;g:textField name=<span class="java&#45;quote">"zipCode"</span>&#62;<p class="paragraph"/>		&#60;g:addressLookupLink&#62;Link to lookup <span class="java&#45;keyword">this</span> address&#60;/g:addressLookupLink&#62;
		&#60;g:addressLookupButton value=<span class="java&#45;quote">"Button to lookup <span class="java&#45;keyword">this</span> address"</span> /&#62;
		&#8230;
		&#60;/form&#62;
	&#60;/body&#62;
&#60;/html&#62;</pre></div><p class="paragraph"/>


<h1 id="configuration">4 Configuration</h1>
<h1>Configuration</h1><p class="paragraph"/>There is only one configuration option for the Address Lookup ZP4 plugin.<p class="paragraph"/><blockquote class="note">
This setting goes in <code>grails-app/conf/Config.groovy</code>.
</blockquote><p class="paragraph"/><h2>Examples</h2><p class="paragraph"/><div class="code"><pre>grails.plugins.addressLookupZpfour.server = 'http://192.168.1.7:8282/'</pre></div><p class="paragraph"/><div class="code"><pre>grails.plugins.addressLookupZpfour.server = 'http://zp4.intranet.example.com/'</pre></div><p class="paragraph"/><div class="code"><pre>grails.plugins.addressLookupZpfour.server = 'http://zp4.example.com:81/'</pre></div><p class="paragraph"/><div class="code"><pre>grails.plugins.addressLookupZpfour.server = 'http://127.0.0.1/'</pre></div><p class="paragraph"/>


<h1 id="example">5 Example</h1>
<h1>Examples</h1><p class="paragraph"/><h2>Tag examples</h2><p class="paragraph"/><blockquote class="note">
In order to use the tags, you need need to install the  <em class="italic">jquery</em>  plugin.
</blockquote><p class="paragraph"/>You may install an example GSP page to demonstrate the tags by running the command<p class="paragraph"/><div class="code"><pre>grails install&#45;address&#45;lookup&#45;example</pre></div><p class="paragraph"/><h2>Code Examples</h2><p class="paragraph"/>You can create an address, look it up, and get information about the lookup by using the following code.<p class="paragraph"/>The <code>StreetAddress.lookup()</code> method uses the com.semaphorecorp.zp4.AddressService to look up the address, and return an instance of a com.semaphorecorp.zp4.Zp4Address that contains the lookup result and some error message information.<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> com.semaphorecorp.zp4.&#42;<p class="paragraph"/>def streetAddressInstance  = <span class="java&#45;keyword">new</span> StreetAddress(
	        address: '176 N. Mississippi River Boulevard',
		    city: 'St. Paul', state: 'MN')<p class="paragraph"/>def zp4AddressIntance = streetAddressInstance.lookup()<p class="paragraph"/>def cleanedStreetAddressInstance = AddressIntance.toStreetAddress()<p class="paragraph"/>assert zp4AddressIntance.certified == 'C'
assert zp4AddressIntance.errorMessage == 'Acceptable city name used'
assert cleanedStreetAddressInstance.address == '176 Mississippi River Blvd N'
assert cleanedStreetAddressInstance.city == 'Saint Paul'
assert cleanedStreetAddressInstance.state == 'MN'
assert cleanedStreetAddressInstance.zipCode == 55104
assert cleanedStreetAddressInstance.zip4 == 5613</pre></div><p class="paragraph"/><h2>Extending your own Address domain class</h2><p class="paragraph"/>You can add some code to your <code>BootStrap.groovy</code> to add a meta-class to your own domain class that contains an address what follows is a simple example.<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">package</span> com.mycompany<p class="paragraph"/>class Customer &#123;
	<span class="java&#45;object">String</span> name
	<span class="java&#45;object">String</span> addressLine
	<span class="java&#45;object">String</span> city
	<span class="java&#45;object">String</span> stateAbbreviation
	<span class="java&#45;object">String</span> zipcode
	<span class="java&#45;object">Boolean</span> cleaned = <span class="java&#45;keyword">false</span>
&#125;</pre></div><p class="paragraph"/>in <code>BootStrap.groovy</code><p class="paragraph"/><div class="code"><pre>com.mycompany.Customer.metaClass.cleanUp = &#123;&#45;&#62;
	<span class="java&#45;object">Integer</span> z = 0
	z = <span class="java&#45;object">Integer</span>.parse(delegate.zipcode)
	def a1 = <span class="java&#45;keyword">new</span> com.semaphorecorp.zp4.StreetAddress(address: delegate.addressLine,
			city: delegate.city,
			state: delegate.stateAbbreviation,
			zipCode: z )
	def za = a.lookup()
	<span class="java&#45;keyword">if</span> (za.certified == 'C') &#123;
		def a2 = a.lookup().toStreetAddress()
		delegate.addressLine = a2.address
		delegate.city = a2.city
		delegate.stateAbbreviation = a2.state
		delegate.zipcode = <span class="java&#45;quote">"$&#123;a2.zipCode&#125;&#45;$&#123;a2.zip4&#125;"</span>
		delegate.cleaned = <span class="java&#45;keyword">true</span>
	&#125; <span class="java&#45;keyword">else</span> &#123;
		delegate.cleaned = <span class="java&#45;keyword">false</span>
	&#125;
&#125;</pre></div><p class="paragraph"/>


                    </div>
                </td>
                <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Scripts</h1><div class="menu-sub">
                        
                        
                        <div class="menu-item"><a href="../ref/Scripts/install-address-lookup-example.html">install-address-lookup-example</a>
                        </div>
                        
                        </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Tags</h1><div class="menu-sub">
                        
                        
                        <div class="menu-item"><a href="../ref/Tags/addressLookupButton.html">addressLookupButton</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/addressLookupLink.html">addressLookupLink</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/addressLookupOnChange.html">addressLookupOnChange</a>
                        </div>
                        
                        </div>
                    </div>
                    
                </div>
            </div>
        </td>
            </tr>
        </table>

        <div id="footer">
            
            
        </div>



<script type="text/javascript" src="../js/docs.js"></script>

    </body>
</html>
